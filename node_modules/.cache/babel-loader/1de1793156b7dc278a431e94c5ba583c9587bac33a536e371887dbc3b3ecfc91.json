{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nlet openMenus = [];\nexport function toggleMenu(menuId) {\n  const menu = document.getElementById(menuId);\n  if (!menu) return;\n  const isOpen = menu.classList.contains(\"open\");\n  closeOpenMenus();\n  menu.classList.toggle(\"open\", !isOpen);\n  if (!isOpen) {\n    openMenus.push(menuId);\n  }\n  menu.addEventListener(\"mouseleave\", event => {\n    if (!isCursorOverElement(menu, event) && !isCursorOverLink(menuId, event)) {\n      closeMenu(menuId);\n    }\n  });\n\n  // Добавляем обработку события mouseenter для ссылок\n  const links = menu.querySelectorAll(`[data-menu=\"${menuId}\"]`);\n  links.forEach(link => {\n    link.addEventListener(\"mouseenter\", () => {\n      if (!openMenus.includes(menuId)) {\n        openMenus.push(menuId);\n      }\n    });\n  });\n}\nfunction closeOpenMenus() {\n  openMenus.forEach(openMenuId => {\n    const openMenu = document.getElementById(openMenuId);\n    openMenu && openMenu.classList.remove(\"open\");\n  });\n  openMenus = [];\n}\nfunction closeMenu(menuId) {\n  const menu = document.getElementById(menuId);\n  menu && menu.classList.remove(\"open\");\n  openMenus = openMenus.filter(openMenuId => openMenuId !== menuId);\n}\nfunction isCursorOverElement(element, event) {\n  const rect = element.getBoundingClientRect();\n  return rect.top <= event.clientY && event.clientY <= rect.bottom && rect.left <= event.clientX && event.clientX <= rect.right;\n}\nfunction isCursorOverLink(menuId, event) {\n  const link = document.querySelector(`[data-menu=\"${menuId}\"]`);\n  if (link) {\n    const linkRect = link.getBoundingClientRect();\n    return event.relatedTarget === link && event.relatedTarget !== link ||\n    // Fix: use 'link' instead of 'element'\n    linkRect.top <= event.clientY && event.clientY <= linkRect.bottom && linkRect.left <= event.clientX && event.clientX <= linkRect.right;\n  }\n  return false;\n}\ndocument.addEventListener(\"mouseleave\", () => {\n  closeOpenMenus();\n});","map":{"version":3,"names":["openMenus","toggleMenu","menuId","menu","document","getElementById","isOpen","classList","contains","closeOpenMenus","toggle","push","addEventListener","event","isCursorOverElement","isCursorOverLink","closeMenu","links","querySelectorAll","forEach","link","includes","openMenuId","openMenu","remove","filter","element","rect","getBoundingClientRect","top","clientY","bottom","left","clientX","right","querySelector","linkRect","relatedTarget"],"sources":["/var/www/cosmo/src/components/header/language-currency.js"],"sourcesContent":["let openMenus = [];\n\nexport function toggleMenu(menuId) {\n  const menu = document.getElementById(menuId);\n\n  if (!menu) return;\n\n  const isOpen = menu.classList.contains(\"open\");\n\n  closeOpenMenus();\n\n  menu.classList.toggle(\"open\", !isOpen);\n  if (!isOpen) {\n    openMenus.push(menuId);\n  }\n\n  menu.addEventListener(\"mouseleave\", (event) => {\n    if (!isCursorOverElement(menu, event) && !isCursorOverLink(menuId, event)) {\n      closeMenu(menuId);\n    }\n  });\n\n  // Добавляем обработку события mouseenter для ссылок\n  const links = menu.querySelectorAll(`[data-menu=\"${menuId}\"]`);\n  links.forEach((link) => {\n    link.addEventListener(\"mouseenter\", () => {\n      if (!openMenus.includes(menuId)) {\n        openMenus.push(menuId);\n      }\n    });\n  });\n}\n\nfunction closeOpenMenus() {\n  openMenus.forEach((openMenuId) => {\n    const openMenu = document.getElementById(openMenuId);\n    openMenu && openMenu.classList.remove(\"open\");\n  });\n  openMenus = [];\n}\n\nfunction closeMenu(menuId) {\n  const menu = document.getElementById(menuId);\n  menu && menu.classList.remove(\"open\");\n  openMenus = openMenus.filter((openMenuId) => openMenuId !== menuId);\n}\n\nfunction isCursorOverElement(element, event) {\n  const rect = element.getBoundingClientRect();\n  return (\n    rect.top <= event.clientY &&\n    event.clientY <= rect.bottom &&\n    rect.left <= event.clientX &&\n    event.clientX <= rect.right\n  );\n}\n\nfunction isCursorOverLink(menuId, event) {\n  const link = document.querySelector(`[data-menu=\"${menuId}\"]`);\n  if (link) {\n    const linkRect = link.getBoundingClientRect();\n    return (\n      (event.relatedTarget === link && event.relatedTarget !== link) || // Fix: use 'link' instead of 'element'\n      (linkRect.top <= event.clientY &&\n        event.clientY <= linkRect.bottom &&\n        linkRect.left <= event.clientX &&\n        event.clientX <= linkRect.right)\n    );\n  }\n  return false;\n}\n\n\ndocument.addEventListener(\"mouseleave\", () => {\n  closeOpenMenus();\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}